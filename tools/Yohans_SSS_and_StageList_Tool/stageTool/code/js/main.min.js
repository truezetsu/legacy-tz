var stageNames = [
	"Battlefield","Final Destination","Delfino's Secret","Luigi's Mansion","Metal Cavern",
	"Bowser's Castle","Kongo Jungle","Rumble Falls","Pirate Ship","Hyrule Castle",
	
	"Norfair","Frigate Orpheon","Yoshi's Island (Brawl)","Halberd","Lylat Cruise",
	"Saffron City","Spear Pillar","Port Town Aero Dive","Infinite Glacier","Flat Zone 2",
	
	"Castle Siege","Wario Land","Distant Planet","Skyworld","Fountain of Dreams",
	"Fourside","Smashville","Shadow Moses Island","Green Hill Zone","PictoChat",
	
	"Hanenbow","Temple","Yoshi's Story (Melee)","Jungle Japes","Onett",
	"Dreamland","Peach's Castle 64","Corneria","Big Blue","Brinstar",
	
	"Pok√©mon Stadium 2","Training Room", "CUSTOM"];

var stageHex = [
	"00","01","02","03","04",
	"05","06","07","08","09",
	"0A","0B","0C","0D","0E",
	"0F","10","11","12","13",
	"14","15","16","17","18",
	"19","1A","1B","1C","1D",
	"1E","1F","20","21","22",
	"23","24","25","26","27",
	"28","2B","2A","2C","2D",
	"2E","2F","30","31","32",
	"33","34","35","36","37",
	"38","39","3A","3B","3C",
	"3D","3E","3F","40","41",
	"42","43","44","45","46",
	"47","48","49","4A"];	
	
	
var menSelNum = [
	"01","02","03","04","05",
	"06","07","08","09","10",
	"11","12","13","14","15",
	"16","17","18","19","20",
	"21","22","23","24","25",
	"26","27","28","29","30",
	"31","50","51","52","53",
	"54","55","56","57","58",
	"59","60","32","33","34",
	"35","36","37","38","39",
	"40","41","42","43","44",
	"45","46","47","48","49",
	"61","62","63","64","65",
	"66","67","68","69","70",
	"71","72","73","74"];
	
var defaultStages1 = [
[21,24, 1,28,26, 0,40,35],//8
[21,24, 1,35,28,26, 0,40, 2],
[21,24, 1, 5,35,28,26, 0,40, 2],//10
[21,24, 1, 5,10,35,28,26, 0,40, 2],
[21,24, 1, 5,35,10,22,28,26, 0,40, 2],//12
[21,24, 1, 5,35,10,32,28,26, 0,40, 2, 22],
[21,24, 1, 5,12,35,10,32,28,26, 0,40, 2, 22],//14
[12,10,32,22,23,21,24, 1, 5,35,28,26, 0,40, 2],//15
[14,12,10,32,22,23,21,24, 1, 5,35,28,26, 0,40, 2],
[14,20,12,10,32,22,23,21,24, 1, 5,35,28,26, 0,40, 2],
[14,20, 4,12,10,32,22,23,21,24, 1, 5,35,28,26, 0,40, 2],//18
[14,20, 4,06,12,10,32,22,23,21,24, 1, 5,35,28,26, 0,40, 2],
[14,20, 4,06,07,12,10,32,22,23,21,24, 1, 5,35,28,26, 0,40, 2],
[14, 9, 4, 5,15,36,18,20,21,24, 1,12,22,10,32,28,26, 0,40, 2,35],//21 //PM
[42,14, 9, 4, 5,15,36,18,20,21,24, 1,12,22,10,32,28,26, 0,40, 2,35],
[42,14, 9, 4, 5,15,36,18,42,20,21,24, 1,12,22,10,32,28,26, 0,40, 2,35],
[42,14, 9, 4, 5,15,36,18,42,20,21,24, 1,12,22,10,42,32,28,26, 0,40, 2,35],//24
[42,14, 9, 4, 5,15,36,18,42,42,20,21,24, 1,12,22,10,42,32,28,26, 0,40, 2,35],
[42,14, 9, 4, 5,15,36,18,42,42,20,21,24, 1,12,22,10,42,32,28,26, 0,40, 2,35,42],
[42,14, 9, 4, 5,15,36,18,42,42,20,21,24, 1,12,22,10,42,42,32,28,26, 0,40, 2,35,42],//27
[42,42,14, 9, 4, 5,15,36,18,42,42,20,21,24, 1,12,22,10,42,42,32,28,26, 0,40, 2,35,42],
[42,42,14, 9, 4, 5,15,36,18,42,42,42,20,21,24, 1,12,22,10,42,42,32,28,26, 0,40, 2,35,42],
[42,42,14, 9, 4, 5,15,36,18,42,42,42,20,21,24, 1,12,22,10,42,42,42,32,28,26, 0,40, 2,35,42],//30
[42,42,14, 9, 4, 5,15,36,18,42,42,42,42,20,21,24, 1,12,22,10,42,42,42,32,28,26, 0,40, 2,35,42],
[42,42,14, 9, 4, 5,15,36,18,42,42,42,42,20,21,24, 1,12,22,10,42,42,42,42,32,28,26, 0,40, 2,35,42],
[42,42,14, 9, 4, 5,15,36,18,42,42,42,42,20,21,24, 1,12,22,10,42,42,42,42,32,28,26, 0,40, 2,35,42,42],//33
[42,42,14, 9, 4, 5,15,36,18,42,42,42,42,20,21,24, 1,12,22,10,42,42,42,42,32,28,26, 0,40, 2,35,42,42,42],
[42,42,14, 9, 4, 5,15,36,18,42,42,42,42,20,21,24, 1,12,22,10,42,42,42,42,32,28,26, 0,40, 2,35,42,42,42,42],
[42,42,14, 9, 4, 5,15,36,18,42,42,42,42,20,21,24, 1,12,22,10,42,42,42,42,32,28,26, 0,40, 2,35,42,42,42,42,42],//36
[42,42,14, 9, 4, 5,15,36,18,42,42,42,42,20,21,24, 1,12,22,10,42,42,42,42,32,28,26, 0,40, 2,35,42,42,42,42,42,42]//37
];

var defaultStages2 = [
[21,24, 1,28,26, 0,40,35],//8
[21,24, 1,35,28,26, 0,40, 2],
[21,24, 1, 5,35,28,26, 0,40, 2],//10
[21,24, 1, 5,10,35,28,26, 0,40, 2],
[21,24, 1, 5,35,10,22,28,26, 0,40, 2],//12
[21,24, 1, 5,35,10,32,28,26, 0,40, 2, 22],
[21,24, 1, 5,12,35,10,32,28,26, 0,40, 2, 22],//14
[12,10,32,22,23,21,24, 1, 5,35,28,26, 0,40, 2],//15
[14,12,10,32,22,23,21,24, 1, 5,35,28,26, 0,40, 2],
[14,20,12,10,32,22,23,21,24, 1, 5,35,28,26, 0,40, 2],
[14,20, 4,12,10,32,22,23,21,24, 1, 5,35,28,26, 0,40, 2],//18
[14,20, 4,06,12,10,32,22,23,21,24, 1, 5,35,28,26, 0,40, 2],
[14,20, 4,06,07,12,10,32,22,23,21,24, 1, 5,35,28,26, 0,40, 2],
[27, 6,25,34,38,17,19, 3,33,37,39,31, 8,16,41, 7,13,11,23,30,29],//21 //PM
[42,27, 6,25,34,38,17,19, 3,33,37,39,31, 8,16,41, 7,13,11,23,30,29],
[42,27, 6,25,34,38,17,19,42, 3,33,37,39,31, 8,16,41, 7,13,11,23,30,29],
[42,27, 6,25,34,38,17,19,42, 3,33,37,39,31, 8,16,42,41, 7,13,11,23,30,29],//24
[42,27, 6,25,34,38,17,19,42,42, 3,33,37,39,31, 8,16,42,41, 7,13,11,23,30,29],
[42,27, 6,25,34,38,17,19,42,42, 3,33,37,39,31, 8,16,42,41, 7,13,11,23,30,29,42],
[42,27, 6,25,34,38,17,19,42,42, 3,33,37,39,31, 8,16,42,42,41, 7,13,11,23,30,29,42],//27
[ 4, 9,27, 6,25,34,38,17,19,18,36, 3,33,37,39,31, 8,16,20,15,41, 7,13,11,23,30,29,14],
[ 4, 9,27, 6,25,34,38,17,19,18,36,15, 3,33,37,39,31, 8,16,20,12,41, 7,13,11,23,30,29,14],
[ 4, 9,27, 6,25,34,38,17,19,18,36,15, 3,33,37,39,31, 8,16,20,32,12,41, 7,13,11,23,30,29,14],//30
[ 4, 9,27, 6,25,34,38,17,19,14,18,36,15, 3,33,37,39,31, 8,16,20,32,12,41, 7,13,11,23,30,29,22],
[ 4, 9,27, 6,25,34,38,17,19,14,18,36,15, 3,33,37,39,31, 8,16,20,10,32,12,41, 7,13,11,23,30,29,22],
[ 4, 9,27, 6,25,34,38,17,19,14,18,36,15, 3,33,37,39,31, 8,16,20,12,32, 5,41, 7,13,11,23,30,29,10,22],//33
[42,42,27, 6,25,34,38,17,19,42,42,42,42, 3,33,37,39,31, 8,16,42,42,42,42,41, 7,13,11,23,30,29,42,42,42],
[42,42,27, 6,25,34,38,17,19,42,42,42,42, 3,33,37,39,31, 8,16,42,42,42,42,41, 7,13,11,23,30,29,42,42,42,42],
[42,42,27, 6,25,34,38,17,19,42,42,42,42, 3,33,37,39,31, 8,16,42,42,42,42,41, 7,13,11,23,30,29,42,42,42,42,42],//36
[42,42,27, 6,25,34,38,17,19,42,42,42,42, 3,33,37,39,31, 8,16,42,42,42,42,41, 7,13,11,23,30,29,42,42,42,42,42,42]//37
];

var stageRows = [[0,3,5], [0,4,5], [0,5,5], [0,6,5], [0,7,5], [0,6,7], [0,7,7], [5,5,5], [6,5,5], [6,6,5], [7,6,5], [7,7,5], [7,6,7], [7,7,7], [8,7,7], [8,8,7], [9,8,7], [9,9,7], [9,8,9], [9,9,9], [10,9,9],  [10,10,9], [10,10,10], [11,10,10], [11,11,10], [11,11,11]];
var deployed = false;
	
$(document).ready(function() {
	$("#stage-amount-page1").on('focus', function () {
        // Store the current value on focus and on change
        numStages = this.value;
		for(stg=0;stg < numStages;stg++){
			value = parseInt($(".stage-picker-page1[name='"+stg+"']").val());
			defaultStages1[numStages-8][stg]=value;
		}
    }).change(function() {
        // Do something with the previous value after the change
		populatePickers("-page1");
		populateIcons();
    });
	
	$("#stage-amount-page2").change(function () {
		populatePickers("-page2");
		populateIcons();
    });
	
	$("#generate_codes").click(function(e) {
		e.preventDefault();
		
  		var demcodes = "<br />Custom Stage Select Screen [Spunit, Phantom Wings, SOJ, Yohan1044]<br />* 046B8F5C 7C802378<br />* 046B8F64 7C6300AE<br />* 040AF618 5460083C<br />* 040AF68C 38840002<br />* 040AF6AC 5463083C<br />* 040AF6C0 88030001<br />* 040AF6E8 3860FFFF<br />* 040AF59C 3860000C<br />* 060B91C8 00000018<br />* BFA10014 7CDF3378<br />* 7CBE2B78 7C7D1B78<br />* 2D05FFFF 418A0014";
		demcodes+=generateCode();
		demcodes+=stageExpansionCode();
		
		$("#demCodes").html(demcodes);
		if($('#demCodes:hidden')) $("#demCodes").slideToggle("slow");
	});

	populatePickers("-page1");
	populatePickers("-page2");
	populateIcons();
	generateCode();
	
	function populateIcons(){
		var customCount1 = 0;
		var customCount2 = 0;
		var page = "-page1";
		
		//Count how many custom stages are on each page (cumalitive).
		var displayNum = $("#stage-amount-page1").val();
		for(stg=0; stg < displayNum; stg++){
			if( $(".stage-picker-page1[name="+stg+"]").val() >= 42){
				customCount1++;
			}
		}
		
		customCount2 = customCount1;
		displayNum = $("#stage-amount-page2").val();
		for(stg=0; stg < displayNum; stg++){
			if( $(".stage-picker-page2[name="+stg+"]").val() >= 42){
				customCount2++;
			}
		}
		
		//customCount1 = 0;
		//customCount2 = 14;
		
		
		var customCount = 0;
		var customCountPage = customCount1-1;
		page = "-page1";
		for(p = 0; p < 2; p++){
			var stgIcons="";
			if( p == 1){ page = "-page2"; customCountPage = customCount2-1; customCount = customCount1;}
			
			displayNum = $("#stage-amount"+page).val();
			if(displayNum > 33){
				
				if(displayNum>36){
					stgIcons+="<img src='code/images/stages/MenSelmapIcon.";
					if( $(".stage-picker"+page+"[name="+36+"]").val() < 42){
						stgIcons+=menSelNum[$(".stage-picker"+page+"[name="+36+"]").val()]+".png' id='stage-icon-"+36+page+"' width='75' height='66'>";
					}else{
						stgIcons+=menSelNum[42 + customCountPage]+".png' id='stage-icon-"+36+page+"' width='75' height='66'>";
						customCountPage--;
					}
				}else{
					stgIcons+="<img src='code/images/stages/Transparent.png' id='stage-icon-trans' width='75' height='66'>"
				}
				
				if(displayNum>35){
					stgIcons+="<img src='code/images/stages/MenSelmapIcon.";
					if( $(".stage-picker"+page+"[name="+35+"]").val() < 42){
						stgIcons+=menSelNum[$(".stage-picker"+page+"[name="+35+"]").val()]+".png' id='stage-icon-"+35+page+"' width='75' height='66'>";
					}else{
						stgIcons+=menSelNum[42 + customCountPage]+".png' id='stage-icon-"+35+page+"' width='75' height='66'>";
						customCountPage--;
					}
				}else{
					stgIcons+="<img src='code/images/stages/Transparent.png' id='stage-icon-trans' width='75' height='66'>"
				}
				
				for(i=0;i<7;i++){stgIcons+="<img src='code/images/stages/Transparent.png' id='stage-icon-trans' width='75' height='66'>";}
				
				if(displayNum>34){
					stgIcons+="<img src='code/images/stages/MenSelmapIcon.";
					if( $(".stage-picker"+page+"[name="+34+"]").val() < 42){
						stgIcons+=menSelNum[$(".stage-picker"+page+"[name="+34+"]").val()]+".png' id='stage-icon-"+34+page+"' width='75' height='66'>";
					}else{
						stgIcons+=menSelNum[42 + customCountPage]+".png' id='stage-icon-"+34+page+"' width='75' height='66'>";
						customCountPage--;
					}
				}else{
					stgIcons+="<img src='code/images/stages/Transparent.png' id='stage-icon-trans' width='75' height='66'>"
				}
				
				stgIcons+="<img src='code/images/stages/MenSelmapIcon.";
				if( $(".stage-picker"+page+"[name="+33+"]").val() < 42){
					stgIcons+=menSelNum[$(".stage-picker"+page+"[name="+33+"]").val()]+".png' id='stage-icon-"+33+page+"' width='75' height='66'>";
				}else{
					stgIcons+=menSelNum[42 + customCountPage]+".png' id='stage-icon-"+33+page+"' width='75' height='66'>";
					customCountPage--;
				}
				stgIcons+="<br />";
				displayNum = 33;
			}	
			for(stg=0; stg < displayNum; stg++){
				
				stgIcons+="<img src='code/images/stages/MenSelmapIcon.";
				if( $(".stage-picker"+page+"[name="+ stg +"]").val() < 42){
					stgIcons+=menSelNum[$(".stage-picker"+page+"[name="+stg+"]").val()]+".png' id='stage-icon-"+stg+page+"' width='75' height='66'>";
				}else{
					stgIcons+=menSelNum[42 + customCount]+".png' id='stage-icon-"+stg+page+"' width='75' height='66'>";
					customCount++;
				}
			
			//Row breaks
				var stageRowNumber = displayNum-8;
				if(stageRows[stageRowNumber][0] == 0){
					if(stg == stageRows[stageRowNumber][1]-1 || stg==(stageRows[stageRowNumber][1]+stageRows[stageRowNumber][2]-1))
						stgIcons+="<br />";
				}else if(stg==stageRows[stageRowNumber][0]-1 || stg==(stageRows[stageRowNumber][0]+stageRows[stageRowNumber][1]-1)
						|| stg==(stageRows[stageRowNumber][0]+stageRows[stageRowNumber][1]+stageRows[stageRowNumber][2]-1)){
					stgIcons+="<br />";
				}	
			}
			
			$("#stagelist-icons"+page).html(stgIcons);
			
		}
	}
	
	function populatePickers(page){
		var pickers="";
		var numStages = $("#stage-amount"+page).val();
		var x;
		for(pckr=0; pckr < numStages; pckr++){
			
			pickers+="<br /><br />Stage "+pckr+": <select style='width:160px' name='"+pckr+"' class='stage-picker"+page+"'>";
			for(stgName=0; stgName < $(stageNames).length; stgName++){
				pickers+="<option value="+stgName;
				
				if(page == "-page1"){
					x=defaultStages1[numStages-8][pckr];
				}else{
					//Change to 2
					x=defaultStages2[numStages-8][pckr];
				}
				if(stgName==x){ pickers+=" selected"; }
				
				pickers+=">"+stageNames[stgName]+"</option>";
			}
			pickers+="</select>";
		}
		$("#stgPicker"+page).html(pickers);
		
		$(".stage-picker"+page).change(function() {
			populateIcons();
		});
		
	}

	//Generate Code
	function generateCode(){
		
		deployed = !deployed;
		if(deployed){ return("") }
		
		var customCount = 0;
		var stageAmountPage1 = ($("#stage-amount-page1").val());
		var stageAmountPage2 = ($("#stage-amount-page2").val());
		var page1Hex = parseInt(stageAmountPage1).toString(16);
		var page2Hex = parseInt(stageAmountPage2).toString(16);
		if(page1Hex.length == 1) page1Hex="0"+page1Hex;
		if(page2Hex.length == 1) page2Hex="0"+page2Hex;
		var stageCodes = "<br />* 006B929C 000000"+page1Hex+"<br />* 066B99D8 000000"+page1Hex+"<br />* ";
		
		//Get all the stage IDs
		for(stg=1; stg<=stageAmountPage1; stg++){
			
			if($(".stage-picker-page1[name='"+(stg-1)+"']").val() < 42){
				hexIndex = stageHex[$(".stage-picker-page1[name='"+(stg-1)+"']").val()];
			}else{
				if(customCount == 32){
					alert("Too Many Custom Stages. The limit is 32.");
					return("")
				}
				hexIndex = stageHex[42+customCount];
				customCount++;
			}
			stageCodes+=hexIndex;
			
			if(((stg%8)==0) && (stageAmountPage1!=stg)) stageCodes+="<br />* ";
			else if(((stg%4)==0) && ((stg%8)!=0)) stageCodes+=" ";
		}
		
		
		//Add Zeros
		if(stageAmountPage1%8 != 0){
			var addZeros = (8-(stageAmountPage1%8))*2;
			for(zeros=addZeros; zeros>0; zeros--){
				if(zeros==8 && addZeros!=8) stageCodes+=" ";
				stageCodes+="0";
		}}

		stageCodes+= "<br />* 006B92A4 000000"+page2Hex+"<br />* 066B9A58 000000"+page2Hex+"<br />* ";
		
		for(stg=1; stg<=stageAmountPage2; stg++){
			if($(".stage-picker-page2[name='"+(stg-1)+"']").val() < 42){
				hexIndex = stageHex[$(".stage-picker-page2[name='"+(stg-1)+"']").val()];
			}else{
				if(customCount == 32){
					alert("Too Many Custom Stages. The limit is 32.");
					return("")
				}
				hexIndex = stageHex[42+customCount];
				customCount++;
			}
			stageCodes+=hexIndex;
			
			if(((stg%8)==0) && (stageAmountPage2!=stg)) stageCodes+="<br />* ";
			else if(((stg%4)==0) && ((stg%8)!=0)) stageCodes+=" ";
		}
		
		//Add Zeros
		if(stageAmountPage2%8 != 0){
			var addZeros = (8-(stageAmountPage2%8))*2;
			for(zeros=addZeros; zeros>0; zeros--){
				if(zeros==8 && addZeros!=8) stageCodes+=" ";
				stageCodes+="0";
		}}
		
		return(stageCodes);
	}
	
	function stageExpansionCode(){		
		var code = "";
		var customCount = 0;
		var customOn = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
		var stageAmountPage1 = ($("#stage-amount-page1").val());
		var stageAmountPage2 = ($("#stage-amount-page2").val());
		
		for(stg=1; stg<=stageAmountPage1; stg++){
			 if(   $(".stage-picker-page1[name='"+(stg-1)+"']").val()  >= 42  ){
				 customCount++;
			 }
		}
		for(stg=1; stg<=stageAmountPage2; stg++){
			 if(   $(".stage-picker-page2[name='"+(stg-1)+"']").val()  >= 42  ){
				 customCount++;
			 }
		}
		
		if(customCount > 0){
			code+="<br />* 06407AAC 0000009E<br />* 01010202 03030404<br />* 05050606 07070808<br />* 0909330A 0B0B0C0C<br />* 0D0D0E0E 130F1410<br />* 15111612 17131814<br />* 19151C16 1D171E18<br />* 1F19201A 211B221C<br />* 231D241E 251F2932<br />* 2A332B34 2C352D36<br />* 2F373038 3139323A"
					+"<br />* 2E3B0064 4020373C<br />* 41214222 43234424<br />* 45254626 47274828<br />* 49294A2A 4B2B4C2C<br />* 4D2D4E2E 4F2F5030<br />* 5131523D 533E543F<br />* 55405641 57425843<br />* 59445A45 5B465C47<br />* 5D485E49 5F4A604B<br />* 614C624D 634E0000";
		}else{
			code+="<br />* 06407AAC 00000058<br />* 01010202 03030404<br />* 05050606 07070808<br />* 0909330A 0B0B0C0C<br />* 0D0D0E0E 130F1410<br />* 15111612 17131814<br />* 19151C16 1D171E18<br />* 1F19201A 211B221C<br />* 231D241E 251F2932<br />* 2A332B34 2C352D36<br />* 2F373038 3139323A<br />* 2E3B0064 0707373C";

		}
		
		if(customCount > 0){
			code += "<br /><br />Stage Roster Expansion System v2.0 [Phantom Wings]<br />* E0000000 80008000<br />* 04043B20 380000FF<br />* 04043B40 1C060018<br />* 04043B58 38840018"
				+"<br />* 04949C8C 3884B460<br />* 04949D10 3884B460<br />* 04949E20 3884B460<br />* 04949EFC 3884B460<br />* C294A588 00000003"
				+"<br />* A063001A 2C030040<br />* 41800008 38600000<br />* 60000000 00000000<br />* C294A1D0 00000003<br />* 7C7D1B78 2C03FFFF"
				+"<br />* 40820008 3FA0003F<br />* 60000000 00000000<br />* 04015564 48000010<br />* 2042AEB0 00000041<br />* 0442AEB0 00000000"
				+"<br />* 80000000 8042AEB0<br />* 80000001 8042AEB0<br />* 60000030 00000000<br />* 8A001801 00000000<br />* 86000000 00000024"
				+"<br />* 86000001 00000018<br />* 62000000 00000000<br />* 0042B348 024B0000<br />* 0442B348 00000040<br />* 0642B34C 00000010"
				+"<br />* 73745F63 7573746F<br />* 6D00002E 72656C00<br />* 80000000 8042BC18<br />* 80000001 8042B460<br />* 8A010001 00000000"
				+"<br />* 0442B560 8042BC14<br />* 0042BC18 010F0000<br />* 0642BC14 00000008<br />* 43757374 6F6D0000<br />* E0000000 80008000"
				+"<br />* 04043B34 483E783C<br />* 0642B370 00000050<br />* 2C060031 4080000C<br />* 80040000 48000040<br />* 3806000F 7C030000"
				+"<br />* 40820030 3866FFD0<br />* 38C4000F 38860001<br />* 3CA08042 60A5B450<br />* 38E00000 7E6802A6<br />* 4BFCB811 7E6803A6"
				+"<br />* 38C00031 4BC1878C<br />* 3884FFE8 4BC1877C<br />* 04949C88 4BAE1749<br />* 04949D0C 4BAE16C5<br />* 04949E1C 4BAE15B5"
				+"<br />* 04949F08 4BAE14C9<br />* 0642B3D0 00000060<br />* 9421FF80 BC610010<br />* 7C6802A6 9061000C<br />* 2C000040 41800030"
				+"<br />* 7C030378 3863FFC1<br />* 3CC08042 60C6BC1C<br />* 38860001 3CA08042<br />* 60A5B450 38E00000<br />* 39200000 4BFCB7AD"
				+"<br />* 38000040 540013BA<br />* 8061000C 7C6803A6<br />* B8610010 80210000<br />* 4E800020 00000000<br />* 0042B455 00000078<br />* 0442B45C 00000002<br />";
		
			code += "<br /><br />--Makes all stages appear in Random.--<br />--Delete this for alternative behavior--"
					+"<br />Enable Random Expansion Stages v1.1 [Phantom Wings]<br />* C26B7A6C 00000005"
					+"<br />* 3860001F 2C120000<br />* 41820008 3860000A<br />* 7C101800 41800008<br />* 38000001 7C800379<br />* 60000000 00000000<br />";
		
		
			code += "<br /><br />Stage-Dependent Song Loaders [Oshtoby]<br />";
			
			if(customCount > 0){
				code+= "<br /><br />STGCUSTOM01: always play T05: {FD: Classic Mode Master Hand}";
				code+= "<br />* 28708CEB 00000040<br />* 4A000000 90180F06<br />* 14000076 FF0027F1<br />* E0000000 80008000<br />";
			}
			
			if(customCount > 1){
				code+= "<br /><br />STGCUSTOM02: always play X06: Classic mode clear";
				code+= "<br />* 28708CEB 00000041<br />* 4A000000 90180F06<br />* 14000076 FF0026FE<br />* E0000000 80008000<br />";
			}			
			
			if(customCount > 2){
				code+= "<br /><br />STGCUSTOM03: always play X10: Tournament Grid";
				code+= "<br />* 28708CEB 00000042<br />* 4A000000 90180F06<br />* 14000076 FF002702<br />* E0000000 80008000<br />";
			}	
			
			if(customCount > 3){
				code+= "<br /><br />STGCUSTOM04: always play X11: Tournament Match End";
				code+= "<br />* 28708CEB 00000043<br />* 4A000000 90180F06<br />* 14000076 FF002703<br />* E0000000 80008000<br />";
			}	

			if(customCount > 4){
				code+= "<br /><br />STGCUSTOM05: always play X13: Classic: Results Screen";
				code+= "<br />* 28708CEB 00000043<br />* 4A000000 90180F06<br />* 14000076 FF002705<br />* E0000000 80008000<br />";
			}	

			if(customCount > 5){
				code+= "<br /><br />STGCUSTOM06: always play X15: All-Star Rest Area";
				code+= "<br />* 28708CEB 00000045<br />* 4A000000 90180F06<br />* 14000076 FF002707<br />* E0000000 80008000<br />";
			}	
			
			if(customCount > 6){
				code+= "<br /><br />STGCUSTOM07: always play X16: Home-Run Contest";
				code+= "<br />* 28708CEB 00000046<br />* 4A000000 90180F06<br />* 14000076 FF002708<br />* E0000000 80008000<br />";
			}				

			if(customCount > 7){
				code+= "<br /><br />STGCUSTOM08: always play X17: Cruel Brawl";
				code+= "<br />* 28708CEB 00000047<br />* 4A000000 90180F06<br />* 14000076 FF002709<br />* E0000000 80008000<br />";
			}
			
			if(customCount > 8){
				code+= "<br /><br />STGCUSTOM09: always play X18: Boss Battle";
				code+= "<br />* 28708CEB 00000048<br />* 4A000000 90180F06<br />* 14000076 FF00270A<br />* E0000000 80008000<br />";
			}
			
			if(customCount > 9){
				code+= "<br /><br />STGCUSTOM0A: always play X19: Trophy Gallery";
				code+= "<br />* 28708CEB 00000049<br />* 4A000000 90180F06<br />* 14000076 FF00270B<br />* E0000000 80008000<br />";
			}
			
			if(customCount > 10){
				code+= "<br /><br />STGCUSTOM0B: always play X20: Sticker Album / Album / Chronicle";
				code+= "<br />* 28708CEB 0000004A<br />* 4A000000 90180F06<br />* 14000076 FF00270C<br />* E0000000 80008000<br />";
			}

			if(customCount > 11){
				code+= "<br /><br />STGCUSTOM0C: always play X21: Coin Launcher";
				code+= "<br />* 28708CEB 0000004B<br />* 4A000000 90180F06<br />* 14000076 FF00270D<br />* E0000000 80008000<br />";
			}
			
			if(customCount > 12){
				code+= "<br /><br />STGCUSTOM0D: always play X22: Classic mode clear - trophy";
				code+= "<br />* 28708CEB 0000004C<br />* 4A000000 90180F06<br />* 14000076 FF00270E<br />* E0000000 80008000<br />";
			}			
			
			if(customCount > 13){
				code+= "<br /><br />STGCUSTOM0E: always play X27: Credits";
				code+= "<br />* 28708CEB 0000004D<br />* 4A000000 90180F06<br />* 14000076 FF002713<br />* E0000000 80008000<br />";
			}
			
			if(customCount > 14){
				code+= "<br /><br />STGCUSTOM0F: always play Y01: Adventure Map";
				code+= "<br />* 28708CEB 0000004E<br />* 4A000000 90180F06<br />* 14000076 FF00281F<br />* E0000000 80008000<br />";
			}
			
			if(customCount > 15){
				code+= "<br /><br />STGCUSTOM10: always play Y02: Step: The Plain";
				code+= "<br />* 28708CEB 0000004F<br />* 4A000000 90180F06<br />* 14000076 FF002820<br />* E0000000 80008000<br />";
			}
			
			if(customCount > 16){
				code+= "<br /><br />STGCUSTOM11: always play Y03: Step: The Cave";
				code+= "<br />* 28708CEB 00000050<br />* 4A000000 90180F06<br />* 14000076 FF002821<br />* E0000000 80008000<br />";
			}
			
			if(customCount > 17){
				code+= "<br /><br />STGCUSTOM12: always play Y04: Step: Subspace";
				code+= "<br />* 28708CEB 00000051<br />* 4A000000 90180F06<br />* 14000076 FF002822<br />* E0000000 80008000<br />";
			}
			
			if(customCount > 18){
				code+= "<br /><br />STGCUSTOM13: always play Y05: Boss Battle Song 1";
				code+= "<br />* 28708CEB 00000052<br />* 4A000000 90180F06<br />* 14000076 FF002823<br />* E0000000 80008000<br />";
			}
			
			if(customCount > 19){
				code+= "<br /><br />STGCUSTOM14: always play Y07: Boss Battle Song 2";
				code+= "<br />* 28708CEB 00000053<br />* 4A000000 90180F06<br />* 14000076 FF002825<br />* E0000000 80008000<br />";
			}
			
			if(customCount > 20){
				code+= "<br /><br />STGCUSTOM15: always play Y08: Save Point";
				code+= "<br />* 28708CEB 00000054<br />* 4A000000 90180F06<br />* 14000076 FF002826<br />* E0000000 80008000<br />";
			}
			
			if(customCount > 21){
				code+= "<br /><br />STGCUSTOM16: always play Y09: {SSE DK Jungle}";
				code+= "<br />* 28708CEB 00000055<br />* 4A000000 90180F06<br />* 14000076 FF002827<br />* E0000000 80008000<br />";
			}
			
			if(customCount > 22){
				code+= "<br /><br />STGCUSTOM17: always play Y10: {SSE Luigi Mansion}";
				code+= "<br />* 28708CEB 00000056<br />* 4A000000 90180F06<br />* 14000076 FF002828<br />* E0000000 80008000<br />";
			}
			
			if(customCount > 23){
				code+= "<br /><br />STGCUSTOM18: always play Y11: {Halberd Interior}";
				code+= "<br />* 28708CEB 00000057<br />* 4A000000 90180F06<br />* 14000076 FF002829<br />* E0000000 80008000<br />";
			}
			
			if(customCount > 24){
				code+= "<br /><br />STGCUSTOM19: always play Y13: {SSE Brinstar}";
				code+= "<br />* 28708CEB 00000058<br />* 4A000000 90180F06<br />* 14000076 FF00282B<br />* E0000000 80008000<br />";
			}
			
			if(customCount > 25){
				code+= "<br /><br />STGCUSTOM1A: always play Y14: Step: Subspace Ver.2";
				code+= "<br />* 28708CEB 00000059<br />* 4A000000 90180F06<br />* 14000076 FF00282C<br />* E0000000 80008000<br />";
			}
			
			if(customCount > 26){
				code+= "<br /><br />STGCUSTOM1B: always play Y15: Step: Subspace Ver.3";
				code+= "<br />* 28708CEB 0000005A<br />* 4A000000 90180F06<br />* 14000076 FF00282D<br />* E0000000 80008000<br />";
			}
			
			if(customCount > 27){
				code+= "<br /><br />STGCUSTOM1C: always play Y16: {Halberd Moving}";
				code+= "<br />* 28708CEB 0000005B<br />* 4A000000 90180F06<br />* 14000076 FF00282E<br />* E0000000 80008000<br />";
			}
			
			if(customCount > 28){
				code+= "<br /><br />STGCUSTOM1D: always play Y17";
				code+= "<br />* 28708CEB 0000005C<br />* 4A000000 90180F06<br />* 14000076 FF00282F<br />* E0000000 80008000<br />";
			}
			
			if(customCount > 29){
				code+= "<br /><br />STGCUSTOM1E: always play Z50";
				code+= "<br />* 28708CEB 0000005D<br />* 4A000000 90180F06<br />* 14000076 FF002863<br />* E0000000 80008000<br />";
			}			
			
			if(customCount > 30){
				code+= "<br /><br />STGCUSTOM1F: always play Z51";
				code+= "<br />* 28708CEB 0000005E<br />* 4A000000 90180F06<br />* 14000076 FF002864<br />* E0000000 80008000<br />";
			}
			
			if(customCount > 31){
				code+= "<br /><br />STGCUSTOM20: always play Z54";
				code+= "<br />* 28708CEB 0000005F<br />* 4A000000 90180F06<br />* 14000076 FF002867<br />* E0000000 80008000<br />";
			}		
		}
		
		
		return(code);
	}
	
});